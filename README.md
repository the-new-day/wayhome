# WayHome

Утилита для поиска маршрутов между двумя городами или двумя станциями. Использует API Яндекс Расписаний (http://rasp.yandex.ru/).

## Сборка
Для сборки необходим C++23. С помощью CMake можно собрать так:
```bash
cmake -B ./build & cmake --build ./build
```

## Использование
| Аргумент             | Значение по умолчанию   | Описание    |
|----------------------|-------------------------|-------------|
| `--from=point`       |                         | Точка отправления. Либо код с системе Яндекс Расписаний, либо обычное название |
| `--to=point`         |                         | Точка прибытия. Либо код с системе Яндекс Расписаний, либо обычное название |
| `--date=date`        |                         | Дата отправления в формате YYYY-MM-DD |
| `--transfers=n`      | `1`                     | Максимальное количество пересадок |
| `--transport=type`   | `all`                   | Тип транспорта |
| `--file=path`        | Нет                     | Файл, в который следует записать маршруты |
| `--update-cache`     |                         | Если указан, следует обновить кэш для маршрута |
| `--clear-cache`      |                         | Сбросить весь кэш маршрутов |
| `--help`             |                         | Игнорировать остальные команды и показать справку

Если в параметрах `--from` и `--to` указано название города или станции, будет использован [сервис поисковых подсказок]("https://suggests.rasp.yandex.net/all_suggests") сервиса Расписаний для поиска кода. Ищется полное соответствие.

## Настройки
Для работы программы необходимо указать ключ API. Для этого необходимо создать рядом с исполняемым файлом Json-файл `wayhome_settings.json` с полем `apikey`:
```json
{
    "apikey": "your_key_here"
}
```
Если файла не существует, он будет создан автоматически.

## Получение маршрутов
По умолчанию маршруты выводятся в стандартный поток вывода. Можно также продублировать маршруты в файл. При записи в файл выводится больше информации о маршруте.

## Кэш
Ответы на все запросы кэшируются, срок хранения кэша - 1 неделя. Можно очистить кэш, указав флаг при использовании либо просто удалив его.
